<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Приложение"
        xmlns:Properties="clr-namespace:Приложение.Properties" x:Class="Приложение.MainWindow"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800" ResizeMode="CanResizeWithGrip" MinHeight="400" MinWidth="550">
    
    <Window.Resources>

        <DataTemplate x:Key="openAnswerTemplate">
            <!-- Поле вопроса: Начало -->
            <Grid Margin="5">
                <StackPanel Margin="10">

                    <!-- Нумерация вопроса -->
                    <TextBlock Text="Вопрос " 
                               HorizontalAlignment="Left" VerticalAlignment="Top" 
                               Margin="-5,-10,0,0">
                        <Run Text ="{Binding Number}"/>
                        <Run Text ="-"/>
                        <Run Text ="{Binding Type}"/>
                    </TextBlock>

                    <!-- Кнопка удаления вопроса -->
                    <Button Content="x" 
                            HorizontalAlignment="Right" VerticalAlignment="Top"  
                            Width="20" Height="20" Margin="-5,-10,0,0" 
                            Click="Button_Click_QuestionDelete" Tag="{Binding Number}"/>

                    <!-- Поля для ввода вопроса -->
                    <TextBlock Text="Введите вопрос" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <TextBox Width="120" HorizontalAlignment="Left" VerticalAlignment="Top" Text="{Binding Name}"/>

                    <!-- Поля для ввода ответа -->

                    <TextBlock Text="Введите ответы" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <ListBox x:Name="listBox2" 
                             ItemsSource= "{Binding Answers}"
                             HorizontalAlignment="Left" 
                             VerticalAlignment="Top"
                             BorderBrush="{x:Null}">

                        <!-- Стиль для того, чтобы элементы не выделялись синим цветом при наведении курсором -->
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <ContentPresenter/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>

                        <!-- Стиль оформления ответа -->
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding Answer}" Width="100"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>

                    </ListBox>

                    <!-- Кнопки добавления и удаления ответов -->
                    <Grid HorizontalAlignment="Left" VerticalAlignment="Top">
                        <Button Content="+" Width="20" Height="20" Click="Button_Click_AnswerAdd" Tag="{Binding Number}"/>
                        <Button Content="-" Width="20" Height="20" Margin="0,0,45,0" Click="Button_Click_AnswerDelete" Tag="{Binding Number}" />
                    </Grid>

                    <!-- Поле с ценностью ответа -->
                    <TextBlock Text="Введите ценность в баллах" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <TextBox Width="25" HorizontalAlignment="Left" VerticalAlignment="Top" Text="{Binding Price}" TextChanged="TextBox_TextChanged" />

                    <!-- Поле обязательности ответа -->
                    <TextBlock Text="Ответ на вопрос обязателен?" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <CheckBox HorizontalAlignment="Left" VerticalAlignment="Top" IsChecked="{Binding AnswerRequired}"/>

                </StackPanel>
                <Border BorderBrush="Black" BorderThickness="1"/>
            </Grid>
            <!-- Поле для вопроса: Конец -->
        </DataTemplate>

        <DataTemplate x:Key="selectiveAnswerOneTemplate">
            <!-- Поле вопроса: Начало -->
            <Grid Margin="5">
                <StackPanel Margin="10">

                    <!-- Нумерация вопроса -->
                    <TextBlock Text="Вопрос " 
                                                       HorizontalAlignment="Left" VerticalAlignment="Top" 
                                                       Margin="-5,-10,0,0">
                        <Run Text ="{Binding Number}"/>
                        <Run Text ="-"/>
                        <Run Text ="{Binding Type}"/>
                    </TextBlock>

                    <!-- Кнопка удаления вопроса -->
                    <Button Content="x" 
                                                    HorizontalAlignment="Right" VerticalAlignment="Top"  
                                                    Width="20" Height="20" Margin="-5,-10,0,0" 
                                                    Click="Button_Click_QuestionDelete" Tag="{Binding Number}"/>

                    <!-- Поля для ввода вопроса -->
                    <TextBlock Text="Введите вопрос" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <TextBox Width="120" HorizontalAlignment="Left" VerticalAlignment="Top" Text="{Binding Name}"/>

                    <!-- Поля для ввода ответа -->

                    <TextBlock Text="Введите ответы и отметьте верные" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <ListBox x:Name="listBox2" 
                                                 ItemsSource= "{Binding Answers}"
                                                 HorizontalAlignment="Left" 
                                                 VerticalAlignment="Top"
                                                 BorderBrush="{x:Null}">

                        <!-- Стиль для того, чтобы элементы не выделялись синим цветом при наведении курсором -->
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <ContentPresenter/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>

                        <!-- Стиль оформления ответа -->
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBox Text="{Binding Answer}" Width="100"/>
                                    <RadioButton IsChecked="{Binding Path=IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>

                    </ListBox>

                    <!-- Кнопки добавления и удаления ответов -->
                    <Grid HorizontalAlignment="Left" VerticalAlignment="Top">
                        <Button Content="+" Width="20" Height="20" Click="Button_Click_AnswerAdd" Tag="{Binding Number}"/>
                        <Button Content="-" Width="20" Height="20" Margin="0,0,45,0" Click="Button_Click_AnswerDelete" Tag="{Binding Number}" />
                    </Grid>

                    <!-- Поле с ценностью ответа -->
                    <TextBlock Text="Введите ценность в баллах" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <TextBox Width="25" HorizontalAlignment="Left" VerticalAlignment="Top" Text="{Binding Price}" TextChanged="TextBox_TextChanged" />

                    <!-- Поле обязательности ответа -->
                    <TextBlock Text="Ответ на вопрос обязателен?" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <CheckBox HorizontalAlignment="Left" VerticalAlignment="Top" IsChecked="{Binding AnswerRequired}"/>

                </StackPanel>
                <Border BorderBrush="Black" BorderThickness="1"/>
            </Grid>
            <!-- Поле для вопроса: Конец -->
        </DataTemplate>

        <DataTemplate x:Key="selectiveAnswerMultipleTemplate">
            <!-- Поле вопроса: Начало -->
            <Grid Margin="5">
                <StackPanel Margin="10">

                    <!-- Нумерация вопроса -->
                    <TextBlock Text="Вопрос " 
                                                       HorizontalAlignment="Left" VerticalAlignment="Top" 
                                                       Margin="-5,-10,0,0">
                        <Run Text ="{Binding Number}"/>
                        <Run Text ="-"/>
                        <Run Text ="{Binding Type}"/>
                    </TextBlock>

                    <!-- Кнопка удаления вопроса -->
                    <Button Content="x" 
                                                    HorizontalAlignment="Right" VerticalAlignment="Top"  
                                                    Width="20" Height="20" Margin="-5,-10,0,0" 
                                                    Click="Button_Click_QuestionDelete" Tag="{Binding Number}"/>

                    <!-- Поля для ввода вопроса -->
                    <TextBlock Text="Введите вопрос" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <TextBox Width="120" HorizontalAlignment="Left" VerticalAlignment="Top" Text="{Binding Name}"/>

                    <!-- Поля для ввода ответа -->

                    <TextBlock Text="Введите ответы и отметьте верные" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <ListBox x:Name="listBox2" 
                                                 ItemsSource= "{Binding Answers}"
                                                 HorizontalAlignment="Left" 
                                                 VerticalAlignment="Top"
                                                 BorderBrush="{x:Null}">

                        <!-- Стиль для того, чтобы элементы не выделялись синим цветом при наведении курсором -->
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <ContentPresenter/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>

                        <!-- Стиль оформления ответа -->
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBox Text="{Binding Answer}" Width="100"/>
                                    <CheckBox IsChecked="{Binding IsCorrect}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>

                    </ListBox>

                    <!-- Кнопки добавления и удаления ответов -->
                    <Grid HorizontalAlignment="Left" VerticalAlignment="Top">
                        <Button Content="+" Width="20" Height="20" Click="Button_Click_AnswerAdd" Tag="{Binding Number}"/>
                        <Button Content="-" Width="20" Height="20" Margin="0,0,45,0" Click="Button_Click_AnswerDelete" Tag="{Binding Number}" />
                    </Grid>

                    <!-- Поле с ценностью ответа -->
                    <TextBlock Text="Введите ценность в баллах" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <TextBox Width="25" HorizontalAlignment="Left" VerticalAlignment="Top" Text="{Binding Price}" TextChanged="TextBox_TextChanged" />

                    <!-- Поле обязательности ответа -->
                    <TextBlock Text="Ответ на вопрос обязателен?" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <CheckBox HorizontalAlignment="Left" VerticalAlignment="Top" IsChecked="{Binding AnswerRequired}"/>

                </StackPanel>
                <Border BorderBrush="Black" BorderThickness="1"/>
            </Grid>
            <!-- Поле для вопроса: Конец -->
        </DataTemplate>

        <DataTemplate x:Key="matchingSearchTemplate">
            <!-- Поле вопроса: Начало -->

            <!-- Поле для вопроса: Конец -->
        </DataTemplate>

        <DataTemplate x:Key="dataInputTemplate">
            <!-- Поле вопроса: Начало -->

            <!-- Поле для вопроса: Конец -->
        </DataTemplate>

        <local:QuestionTemplateSelector OpenAnswerTemplate="{StaticResource openAnswerTemplate}"
                                        SelectiveAnswerOneTemplate="{StaticResource selectiveAnswerOneTemplate}"
                                        SelectiveAnswerMultipleTemplate="{StaticResource selectiveAnswerMultipleTemplate}"
                                        MatchingSearchTemplate="{StaticResource matchingSearchTemplate}"
                                        DataInputTemplate="{StaticResource dataInputTemplate}"
                                        x:Key="questionTemplateSelector"/>

    </Window.Resources>

    <Grid>
        <!-- Поверхность главного меню -->
        <Grid x:Name="Main" IsEnabled="True" Visibility="Visible">
            
            <Button Content="Создать тест" 
                    HorizontalAlignment="Left" VerticalAlignment="Top" 
                    Height="40" Width="120" Margin="10,10,0,0" 
                    Click="Button_Click_IntermediateWindow" Tag="{Binding ElementName=Editor}">
                <Button.DataContext>
                    <local:CreateTest/>
                </Button.DataContext>
            </Button>
            
            <Button Content="Редактировать тест" 
                    HorizontalAlignment="Left" VerticalAlignment="Top" 
                    Height="40" Width="120" Margin="135,10,0,0" 
                    Click="Button_Click_IntermediateWindow" Tag="{Binding ElementName=Editor}">
                <Button.DataContext>
                    <local:OpenTestForEdit/>
                </Button.DataContext>
            </Button>
            
            <Button Content="Запустить тест" 
                    HorizontalAlignment="Left" VerticalAlignment="Top" 
                    Height="40" Width="120" Margin="260,10,0,0" 
                    Click="Button_Click_IntermediateWindow" Tag="{Binding ElementName=Test}">
                <Button.DataContext>
                    <local:OpenTest/>
                </Button.DataContext>
            </Button>
            
            <Button Content="Посмотреть результаты" 
                    HorizontalAlignment="Left" VerticalAlignment="Top" 
                    Height="40" Width="140" Margin="385,10,0,0"
                    Click="Button_Click_IntermediateWindow" Tag="{Binding ElementName=Result}">
                <Button.DataContext>
                    <local:OpenResults/>
                </Button.DataContext>
            </Button>
        </Grid>
        
        <!-- Поверхность редактора -->
        <Grid x:Name="Editor" IsEnabled="False" Visibility="Hidden">
            
            <Button Content="Сохранить" 
                    HorizontalAlignment="Left" VerticalAlignment="Top" 
                    Height="40" Width="120" Margin="10,10,0,0" 
                    Click="SaveTest"/>
            
            <Button Content="Сохранить как..." 
                    HorizontalAlignment="Left" VerticalAlignment="Top" 
                    Height="40" Width="120" Margin="135,10,0,0" 
                    Click="Заглушка"/>
            
            <Button Content="Проверить" 
                    HorizontalAlignment="Left" VerticalAlignment="Top" 
                    Height="40" Width="120" Margin="260,10,0,0" 
                    Click="Заглушка"/>

            <Button Content="Вернуться назад" 
                    HorizontalAlignment="Left" VerticalAlignment="Bottom" 
                    Height="40" Width="120" Margin="10,0,0,10" 
                    Click="Button_Click_IntermediateWindow" Tag="{Binding ElementName=Main}">
                <Button.DataContext>
                    <local:ExitFromEdit/>
                </Button.DataContext>
            </Button>

            <!-- Поле, в котором находится тест -->
            <Grid Margin="10,55,10,55">
                <ScrollViewer PreviewMouseWheel="ScrollViewer_PreviewMouseWheel">
                    <StackPanel Margin="10">
                        
                        <!-- Название теста -->
                        <TextBox x:Name="textBox1" Text="Название теста" 
                                 MaxWidth="800" MinHeight="30" />
                        
                        <!-- Список вопросов: Начало -->
                        <ListBox x:Name="listBox1"
                                 MaxWidth="800"
                                 HorizontalContentAlignment="Center" 
                                 BorderBrush="{x:Null}"
                                 ItemTemplateSelector="{StaticResource questionTemplateSelector}">
                            
                            <!-- Стиль для того, чтобы элементы не выделялись синим цветом при наведении курсором -->
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="ListBoxItem">
                                                <ContentPresenter/>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </ListBox.ItemContainerStyle>

                        </ListBox>
                        <!-- Список вопросов: Конец -->
                        
                        <!-- Кнопка добавления вопроса -->
                        <ComboBox x:Name="comboBox1" Height="40" Width="120" Margin="0,10,0,0" DropDownClosed="comboBox1_DropDownClosed"/>
                        
                    </StackPanel>
                </ScrollViewer>
                
            </Grid>
        </Grid>
        
        <!-- Поверхность тестирования -->
        <Grid x:Name="Test" IsEnabled="False" Visibility="Hidden">
            <TextBlock Text="Это типо окно тестирования, но пока пустое"/>
        </Grid>

        <!-- Поверхность просмотра результатов -->
        <Grid x:Name="Result" IsEnabled="False" Visibility="Hidden">
            <TextBlock Text="Это типо окно тестирования, но пока пустое"/>
        </Grid>
    </Grid>
    
</Window>